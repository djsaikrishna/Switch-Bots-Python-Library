"use strict";(self.webpackChunkdocumentation=self.webpackChunkdocumentation||[]).push([[1222],{3905:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>h});var a=n(7294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function m(e,t){if(null==e)return{};var n,a,o=function(e,t){if(null==e)return{};var n,a,o={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var s=a.createContext({}),c=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},p=function(e){var t=c(e.components);return a.createElement(s.Provider,{value:t},e.children)},d="mdxType",l={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},u=a.forwardRef((function(e,t){var n=e.components,o=e.mdxType,r=e.originalType,s=e.parentName,p=m(e,["components","mdxType","originalType","parentName"]),d=c(n),u=o,h=d["".concat(s,".").concat(u)]||d[u]||l[u]||r;return n?a.createElement(h,i(i({ref:t},p),{},{components:n})):a.createElement(h,i({ref:t},p))}));function h(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var r=n.length,i=new Array(r);i[0]=u;var m={};for(var s in t)hasOwnProperty.call(t,s)&&(m[s]=t[s]);m.originalType=e,m[d]="string"==typeof e?e:o,i[1]=m;for(var c=2;c<r;c++)i[c]=n[c];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}u.displayName="MDXCreateElement"},6173:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>i,default:()=>l,frontMatter:()=>r,metadata:()=>m,toc:()=>c});var a=n(7462),o=(n(7294),n(3905));const r={sidebar_position:1},i="Commands",m={unversionedId:"interactions/commands",id:"interactions/commands",title:"Commands",description:"Commands are the primary way of interacting with a bot.",source:"@site/docs/interactions/commands.md",sourceDirName:"interactions",slug:"/interactions/commands",permalink:"/Switch-Bots-Python-Library/docs/interactions/commands",draft:!1,tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1},sidebar:"tutorialSidebar",previous:{title:"Interactions",permalink:"/Switch-Bots-Python-Library/docs/category/interactions"},next:{title:"Keyboards",permalink:"/Switch-Bots-Python-Library/docs/interactions/keyboards"}},s={},c=[{value:"Registering commands",id:"registering-commands",level:2},{value:"Handling commands",id:"handling-commands",level:2}],p={toc:c},d="wrapper";function l(e){let{components:t,...n}=e;return(0,o.kt)(d,(0,a.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"commands"},"Commands"),(0,o.kt)("p",null,"Commands are the primary way of interacting with a bot."),(0,o.kt)("p",null,"They are short messages that start with a ",(0,o.kt)("inlineCode",{parentName:"p"},"/")," following byt 1 to 32 characters with no spaces, and are sent to the bot in the chat. The bot will then receive the command and act accordingly."),(0,o.kt)("p",null,"Commands have also parameters, which are separated by spaces. For example, the command ",(0,o.kt)("inlineCode",{parentName:"p"},"/command param1 param2")," has two parameters: ",(0,o.kt)("inlineCode",{parentName:"p"},"param1")," and ",(0,o.kt)("inlineCode",{parentName:"p"},"param2"),"."),(0,o.kt)("h2",{id:"registering-commands"},"Registering commands"),(0,o.kt)("p",null,"Commands must be registered into the bot creating an instance of ",(0,o.kt)("inlineCode",{parentName:"p"},"RegisterCommand")," class and passing it to the ",(0,o.kt)("inlineCode",{parentName:"p"},"add_command")," method of the ",(0,o.kt)("inlineCode",{parentName:"p"},"BotApp")," class."),(0,o.kt)("p",null,"The ",(0,o.kt)("inlineCode",{parentName:"p"},"BotCommand")," class takes 2 parameters:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"command:str"),": The command name."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"description:str"),": The command description (a short descriptive string of what the command does)."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"channel:bool"),": Whether the command can be used in a channel or not. Defaults to ",(0,o.kt)("inlineCode",{parentName:"li"},"False"),".")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-python"},'from swibots import (\n    BotApp,\n    BotCommand)\n\nTOKEN= "YOUR_TOKEN"\n\napp = BotApp(\n    TOKEN, "A cool bot with annotations and everything you could possibly want :)"\n).set_bot_commands(\n    [\n        BotCommand("test", "Test command", True),\n        BotCommand("echo", "Echoes the message", True),\n        BotCommand("buttons", "Shows buttons", True),\n    ]\n)\n\napp.run()\n')),(0,o.kt)("admonition",{type:"caution"},(0,o.kt)("p",{parentName:"admonition"},"All the commands must be registered before the bot is started.\nThe server will not send a ",(0,o.kt)("inlineCode",{parentName:"p"},"Command")," event to the bot if the command is not registered.")),(0,o.kt)("h2",{id:"handling-commands"},"Handling commands"),(0,o.kt)("p",null,"As has been explained on ",(0,o.kt)("a",{parentName:"p",href:"/docs/fundamentals/handlers"},"the handlers page"),", the bot will receive a ",(0,o.kt)("inlineCode",{parentName:"p"},"CommandEvent")," when a command is sent to it.\nTo handle the command, you must create a handler function and register it using the ",(0,o.kt)("inlineCode",{parentName:"p"},"on_command")," decorator or calling ",(0,o.kt)("inlineCode",{parentName:"p"},"add_hanlder")," method of your bot app."),(0,o.kt)("p",null,"The handler function must accept a ",(0,o.kt)("inlineCode",{parentName:"p"},"BotContext[CommandEvent]")," as its only argument."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-python"},'from swibots import (\n    BotApp,\n    BotContext,\n    CommandEvent)\n\nTOKEN = "YOUR_TOKEN"\n\napp = BotApp(\n    TOKEN, "A cool bot with annotations and everything you could possibly want :)"\n).set_bot_commands(\n    [\n        BotCommand("echo", "Echoes the message", True)\n    ]\n)\n\n\n@app.on_command("echo")\nasync def echo_handler(ctx: BotContext[CommandEvent]):\n    m = await ctx.prepare_response_message(ctx.event.message)\n    # Get the text to echo from the command parameters\n    text = ctx.event.params or "Nothing to echo"\n    m.message = f"Your message: {text}"\n    await ctx.send_message(m)\n\napp.run()\n\n')))}l.isMDXComponent=!0}}]);